using System;
using Microsoft.Extensions.Logging;

namespace ConsoleChess
{
    internal class Program
    {
        public static void Main(string[] args) {
            // create a logger factory
            var loggerFactory = LoggerFactory.Create(
                builder => builder
                            // add console as logging target
                            .AddConsole()
                            // add debug output as logging target
                            .AddDebug()
                            // set minimum level to log
                            .SetMinimumLevel(LogLevel.Debug)
            );

            // create a logger
            var logger = loggerFactory.CreateLogger<Program>();

            // logging
            logger.LogTrace("Startup");

            Console.Title = "Console Chess v0.1";
            RunTitleMenu();
        }

        static void RunTitleMenu() {

            string prompt = @"
________/\\\\\\\\\_________________________________________________________/\\\\\\_____________________________         
 _____/\\\////////_________________________________________________________\////\\\_____________________________        
  ___/\\\/_____________________________________________________________________\/\\\_____________________________       
   __/\\\_________________/\\\\\_____/\\/\\\\\\____/\\\\\\\\\\_____/\\\\\_______\/\\\________/\\\\\\\\____________      
    _\/\\\_______________/\\\///\\\__\/\\\////\\\__\/\\\//////____/\\\///\\\_____\/\\\______/\\\/////\\\___________     
     _\//\\\_____________/\\\__\//\\\_\/\\\__\//\\\_\/\\\\\\\\\\__/\\\__\//\\\____\/\\\_____/\\\\\\\\\\\____________    
      __\///\\\__________\//\\\__/\\\__\/\\\___\/\\\_\////////\\\_\//\\\__/\\\_____\/\\\____\//\\///////_____________   
       ____\////\\\\\\\\\__\///\\\\\/___\/\\\___\/\\\__/\\\\\\\\\\__\///\\\\\/____/\\\\\\\\\__\//\\\\\\\\\\___________  
        _______\/////////_____\/////_____\///____\///__\//////////_____\/////_____\/////////____\//////////____________ 
________/\\\\\\\\\__/\\\________________________________________________________________________________________________                                              
 _____/\\\////////__\/\\\________________________________________________________________________________________________                                             
  ___/\\\/___________\/\\\________________________________________________________________________________________________                                            
   __/\\\_____________\/\\\_____________/\\\\\\\\___/\\\\\\\\\\__/\\\\\\\\\\_______________________________________________                                           
    _\/\\\_____________\/\\\\\\\\\\____/\\\/////\\\_\/\\\//////__\/\\\//////________________________________________________                                          
     _\//\\\____________\/\\\/////\\\__/\\\\\\\\\\\__\/\\\\\\\\\\_\/\\\\\\\\\\_______________________________________________                                         
      __\///\\\__________\/\\\___\/\\\_\//\\///////___\////////\\\_\////////\\\_______________________________________________                                        
       ____\////\\\\\\\\\_\/\\\___\/\\\__\//\\\\\\\\\\__/\\\\\\\\\\__/\\\\\\\\\\_______________________________________________                                       
        _______\/////////__\///____\///____\//////////__\//////////__\//////////________________________________________________

Welcome to Console Chess. Chess in the terminal!
(Use the arrow keys to cycle through options and press Enter to select an opiton.)
";

            string[] options = new string[] { "Play", "About", "Exit" };
            Menu mainMenu = new Menu(prompt, options);
            int selectedIndex = mainMenu.Run();

            switch(selectedIndex)
            {
                case 0:
                    RunGame();
                    break;
                case 1:
                    DisplayAbout();
                    break; 
                case 2:
                    ExitProgram();
                    break;
                default: 
                    break;
            }
        }
        private static void RunGame()
        {
            string prompt = @"
   ▄██████▄     ▄████████   ▄▄▄▄███▄▄▄▄      ▄████████       ▄██████▄     ▄███████▄     ███      ▄█   ▄██████▄  ███▄▄▄▄      ▄████████ 
  ███    ███   ███    ███ ▄██▀▀▀███▀▀▀██▄   ███    ███      ███    ███   ███    ███ ▀█████████▄ ███  ███    ███ ███▀▀▀██▄   ███    ███ 
  ███    █▀    ███    ███ ███   ███   ███   ███    █▀       ███    ███   ███    ███    ▀███▀▀██ ███▌ ███    ███ ███   ███   ███    █▀  
 ▄███          ███    ███ ███   ███   ███  ▄███▄▄▄          ███    ███   ███    ███     ███   ▀ ███▌ ███    ███ ███   ███   ███        
▀▀███ ████▄  ▀███████████ ███   ███   ███ ▀▀███▀▀▀          ███    ███ ▀█████████▀      ███     ███▌ ███    ███ ███   ███ ▀███████████ 
  ███    ███   ███    ███ ███   ███   ███   ███    █▄       ███    ███   ███            ███     ███  ███    ███ ███   ███          ███ 
  ███    ███   ███    ███ ███   ███   ███   ███    ███      ███    ███   ███            ███     ███  ███    ███ ███   ███    ▄█    ███ 
  ████████▀    ███    █▀   ▀█   ███   █▀    ██████████       ▀██████▀   ▄████▀         ▄████▀   █▀    ▀██████▀   ▀█   █▀   ▄████████▀  
                                                                                                                                       
";

            GameMenu gameMenu = new GameMenu(prompt, new string[] {"Local Multiplayer","Server Browser","Back To Title"});
            int selectedIndex = gameMenu.Run();

            switch (selectedIndex)
            {
                case 0:
                    LocalMultiPlayerGame();
                    break;
                case 1:
                    ServerBrowser();
                    break;
                case 2:
                    RunTitleMenu();
                    break;
                default:
                    break;
            }
        }
        private static void LocalMultiPlayerGame()
        {
            Game game = new Game();
            EnumGameStatus gameEnding = game.Run();
            // way too painful         
            //GameRenderer render = new GameRenderer();
            //render.GameOverScreen(gameEnding);
            PrintGameOver();
            Console.WriteLine("Press any key to continue. . .");
            Console.ReadKey(true);
            RunGame();
        }
        private static void ServerBrowser()
        {
            Console.Clear();
            Console.ForegroundColor = ConsoleColor.Green;
            string symbol = @"
                                                                                          ░░                                
                                                                    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒                          
                                                    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░▒▒░░▓▓                          
                                    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░░░░░░░░░░░░░░░░░░░░░▓▓                          
                  ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░▒▒░░▒▒░░▒▒░░▒▒░░▓▓                          
  ░░░░░░░░░░░░▒▒░░░░░░░░░░▒▒▒▒▒▒▒▒░░▒▒░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▓▓                          
░░░░▒▒░░▒▒▒▒▒▒▒▒▒▒░░░░░░░░▒▒░░░░▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░▒▒░░▒▒░░░░░░░░░░░░░░▓▓                          
░░▒▒▒▒░░▒▒▒▒░░░░▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░░░░░▒▒░░▒▒░░▒▒░░▒▒                          
  ▒▒░░░░░░░░░░░░▒▒▒▒░░▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒                          
  ▒▒▒▒▒▒░░▒▒░░░░░░░░░░▒▒▒▒▒▒░░▒▒▒▒▒▒▓▓▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░▒▒░░▒▒░░▒▒░░▒▒░░░░░░▒▒                          
  ▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░▒▒▒▒▒▒██▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░░░░░░░░░▒▒░░▒▒░░▒▒                          
░░▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░██░░██░░░░░░░░░░░░░░░░░░░░░░▒▒░░░░░░░░▒▒░░░░░░░░░░░░░░░░░░░░░░░░                          
  ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░██░░░░░░██▒▒░░░░░░░░░░░░░░░░▒▒░░░░░░░░░░░░░░▒▒░░▒▒░░▒▒░░▒▒░░▒▒░░░░                          
░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░▓▓▒▒░░░░░░▒▒▓▓░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░                          
  ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░▒▒▒▒░░██░░░░░░░░░░▓▓▒▒░░░░░░░░░░░░░░░░▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░                            
  ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░▒▒▒▒▒▒██░░░░░░░░░░▓▓▒▒░░░░░░░░░░░░░░░░▒▒░░░░░░░░▒▒░░▒▒░░▒▒░░▒▒░░▒▒░░▒▒░░░░                          
  ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░▓▓░░░░░░░░░░░░░░██▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░▒▒░░░░░░░░░░░░░░░░                          
  ▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░▒▒░░░░██░░░░░░██████░░░░░░██▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░                            
  ▒▒▒▒▒▒▒▒░░░░▒▒▒▒░░░░▒▒░░██▒▒░░░░██████░░░░░░▓▓▒▒░░░░░░░░░░░░▒▒░░░░░░░░▒▒░░▒▒░░▒▒░░▒▒░░▒▒░░▒▒░░                            
  ▒▒░░░░▒▒░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▒▒░░░░██████░░░░░░▓▓▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░                            
  ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░▒▒▒▒██░░░░░░░░██████░░░░░░░░▓▓▒▒░░░░░░░░░░▒▒░░░░░░░░▒▒░░▒▒░░▒▒░░▒▒░░▒▒░░▒▒░░                            
  ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░██░░░░░░░░██████░░░░░░░░██▒▒░░░░░░░░▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░                            
  ▒▒▒▒▒▒▒▒░░░░░░░░░░░░▒▒▒▒░░░░░░░░██████░░░░░░░░██▒▒░░░░░░░░░░░░░░░░░░░░▒▒░░░░▒▒▒▒░░▒▒░░▒▒░░▒▒░░                            
  ▒▒░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓░░░░░░░░░░█OOPS!░░░░░░░░▓▓▒▒░░░░░░░░▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░                            
  ▒▒▒▒▒▒░░▒▒▒▒▒▒▒▒░░▒▒▓▓░░░░░░░░░░██████░░░░░░░░░░▓▓▓▓░░░░░░░░░░░░░░░░░░▒▒░░░░▒▒░░▒▒▒▒░░▒▒░░▒▒░░                            
  ▒▒░░▒▒░░▒▒▒▒▒▒▒▒░░░░▓▓░░░░░░░░░░██████░░░░░░░░░░░░▓▓▒▒░░░░░░▒▒░░░░░░░░▒▒░░░░░░▒▒░░▒▒░░░░░░░░▒▒                            
  ░░░░▒▒▒▒▒▒░░░░░░░░██░░░░░░░░░░░░██████░░░░░░░░░░░░▓▓▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░▒▒                            
  ▒▒▒▒▒▒▒▒░░░░▒▒▒▒░░██░░░░░░░I'll get around to this▓▓▒▒░░░░░░▒▒▒▒░░░░░░▒▒░░░░░░▒▒░░░░░░░░░░░░▒▒                            
  ▒▒▒▒▒▒░░░░░░▒▒▒▒░░██░░░░░░░░░░░░▓▓████░░░░░░░░░░░░░░▓▓░░░░░░▒▒░░░░░░░░░░░░░░░░░░░░░░▒▒░░▒▒░░▒▒                            
  ▒▒▒▒▒▒░░▒▒░░▒▒▒▒▓▓░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▓▓▒▒░░▒▒░░░░░░░░░░░░░░░░▒▒▒▒░░▒▒░░░░░░░░▒▒                            
  ▒▒▒▒▒▒░░▒▒▒▒░░▒▒▓▓░░░░░░░░░░░░░░█-JS██░░░░░░░░░░░░░░▓▓▒▒░░░░░░░░░░░░░░▒▒░░░░░░░░░░░░░░░░░░░░▒▒                            
  ▒▒▒▒▒▒░░▒▒░░▒▒▒▒▒▒░░░░░░░░░░░░░░██████░░░░░░░░░░░░░░░░▓▓▒▒░░▒▒░░░░░░░░░░░░░░░░░░▒▒░░▒▒░░▒▒░░░░                            
  ░░▒▒▒▒▒▒▒▒▒▒░░░░▒▒░░░░░░░░░░░░░░██████░░░░░░░░░░░░░░░░██▓▓░░░░░░░░░░░░▒▒░░░░░░░░░░▒▒░░░░░░░░▒▒                            
  ▒▒▒▒▒▒▒▒▒▒▒▒░░░░▓▓▒▒░░░░░░░░░░░░██████░░░░░░░░░░░░░░░░██▓▓░░░░░░░░░░░░▒▒░░░░░░░░░░░░▒▒░░▒▒░░▒▒                            
  ▒▒▒▒▒▒▒▒▒▒▒▒░░░░▒▒████████▓▓▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░▓▓░░▒▒░░░░░░░░░░░░░░▒▒░░░░░░░░░░░░░░▒▒                            
  ▒▒▒▒▒▒▒▒▒▒▒▒░░░░▒▒░░░░▒▒▓▓████████████▓▓▒▒░░░░░░░░░░░░░░▓▓██▒▒░░░░░░░░▒▒░░░░░░░░░░░░░░░░░░░░▒▒                            
  ░░▒▒▒▒▒▒▒▒░░▒▒░░░░░░░░░░░░░░░░░░░░▒▒██▓▓████████▓▓▒▒▒▒░░▓▓▓▓░░░░░░░░░░▒▒░░░░░░░░░░░░░░░░▒▒░░▒▒░░░░░░░░                    
  ░░▒▒░░▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░░░░░░░▒▒▓▓██████▓▓▒▒░░░░░░░░░░░░░░░░░░░░▒▒░░▒▒░░░░░░▒▒░░░░░░░░░░░░░░░░░░░░░░      
  ░░░░░░░░▒▒▒▒▒▒░░░░░░░░░░░░▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░▒▒░░░░░░░░░░░░░░▒▒░░░░░░░░░░░░░░▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░
    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░░░░░░░▒▒░░░░░░░░░░░░░░░░▒▒░░▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░
          ░░░░░░▒▒░░░░░░░░░░▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░░░░░░░░░░░▒▒░░▒▒░░▒▒▓▓▓▓▒▒░░░░░░░░░░░░░░░░░░░░  
                  ░░▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░▒▒░░░░░░░░░░░░░░▒▒████▒▒▒▒▒▒▒▒░░░░░░░░░░░░    
                      ░░░░▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░░░░░░░▒▒░░░░░░░░░░░░▒▒░░▒▒░░▒▒██▒▒░░▒▒▒▒▒▒▒▒▒▒░░░░░░░░    
                              ░░▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░▒▒░░░░░░░░░░▒▒░░▒▒░░▒▒▒▒▒▒░░░░░░░░        
                                  ░░░░▒▒▒▒░░░░░░░░░░░░░░░░░░░░▒▒░░░░░░░░░░░░░░░░░░░░░░▒▒░░▒▒░░▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░▒▒          
                                          ░░░░▒▒░░░░░░░░░░░░░░▒▒░░░░░░░░▒▒░░░░░░░░▒▒░░▒▒░░▒▒░░▒▒▒▒▒▒▒▒▒▒░░░░▒▒░░            
                                                ░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░▒▒░░░░░░░░░░▒▒░░▒▒▒▒▒▒▒▒░░░░██░░              
                                                    ░░░░▒▒░░░░░░░░░░░░░░▒▒░░░░░░░░▒▒░░▒▒░░▒▒░░▒▒▒▒▒▒░░░░▓▓░░                
                                                            ░░▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░▒▒░░░░░░▒▒░░                  
                                                                    ░░▒▒▒▒░░░░░░░░░░░░░░░░▒▒░░▒▒░░▓▓░░                      
                                                                        ░░░░░░▒▒▒▒░░░░░░░░░░░░▒▒░░░░                        
                                                                                ░░░░▒▒▒▒▒▒░░░░▒▒░░                          

";
            Console.WriteLine(symbol);
            Console.WriteLine("Not implimented in this alpha! \n Press enter to escape.");
            Console.ResetColor();
            Console.ReadLine();
            RunGame();
        }
        private static void DisplayAbout()
        {
            Console.Clear();

            string prompt = @"
  :::.     :::::::.      ...      ...    :::::::::::::::
  ;;`;;     ;;;'';;'  .;;;;;;;.   ;;     ;;;;;;;;;;;''''
 ,[[ '[[,   [[[__[[\.,[[     \[[,[['     [[[     [[     
c$$$cc$$$c  $$""""""""Y$$$$$,     $$$$$      $$$     $$     
 888   888,_88o,,od8P""888,_ _,88P88    .d888     88,    
 YMM   """"` """"YUMMMP""   ""YMMMMMP""  ""YmmMMMM""""     MMM    

         Programmed by Jordan Schmelzer, JUN2024
";

            Menu menuAbout = new Menu(prompt, new string[] { "Return to Menu" });


            int selectedIndex = menuAbout.Run();

            switch (selectedIndex)
            {
                case 0:
                    RunTitleMenu();
                    break;
            }
        }
        static void ExitProgram()
        {
            // TODO: End Multiplayer sessions
            Console.WriteLine("\n Thanks for playing! Press any key to exit...");
            Console.ReadKey(true);
            Environment.Exit(0);
        }

        private static void PrintGameOver()
        {
            Console.Clear();
            string s = @"
 ________  ___  ___  _______   ________  ___  __    _____ ______   ________  _________  _______   ___       
|\   ____\|\  \|\  \|\  ___ \ |\   ____\|\  \|\  \ |\   _ \  _   \|\   __  \|\___   ___\\  ___ \ |\  \      
\ \  \___|\ \  \\\  \ \   __/|\ \  \___|\ \  \/  /|\ \  \\\__\ \  \ \  \|\  \|___ \  \_\ \   __/|\ \  \     
 \ \  \    \ \   __  \ \  \_|/_\ \  \    \ \   ___  \ \  \\|__| \  \ \   __  \   \ \  \ \ \  \_|/_\ \  \    
  \ \  \____\ \  \ \  \ \  \_|\ \ \  \____\ \  \\ \  \ \  \    \ \  \ \  \ \  \   \ \  \ \ \  \_|\ \ \__\   
   \ \_______\ \__\ \__\ \_______\ \_______\ \__\\ \__\ \__\    \ \__\ \__\ \__\   \ \__\ \ \_______\|__|   
    \|_______|\|__|\|__|\|_______|\|_______|\|__| \|__|\|__|     \|__|\|__|\|__|    \|__|  \|_______|   ___ 
                                                                                                       |\__\
                                                                                                       \|__|
                                                                                                            
 ________  ________  _____ ______   _______           ________  ___      ___ _______   ________  ___        
|\   ____\|\   __  \|\   _ \  _   \|\  ___ \         |\   __  \|\  \    /  /|\  ___ \ |\   __  \|\  \       
\ \  \___|\ \  \|\  \ \  \\\__\ \  \ \   __/|        \ \  \|\  \ \  \  /  / | \   __/|\ \  \|\  \ \  \      
 \ \  \  __\ \   __  \ \  \\|__| \  \ \  \_|/__       \ \  \\\  \ \  \/  / / \ \  \_|/_\ \   _  _\ \  \     
  \ \  \|\  \ \  \ \  \ \  \    \ \  \ \  \_|\ \       \ \  \\\  \ \    / /   \ \  \_|\ \ \  \\  \\ \__\    
   \ \_______\ \__\ \__\ \__\    \ \__\ \_______\       \ \_______\ \__/ /     \ \_______\ \__\\ _\\|__|    
    \|_______|\|__|\|__|\|__|     \|__|\|_______|        \|_______|\|__|/       \|_______|\|__|\|__|   ___  
                                                                                                      |\__\ 
                                                                                                      \|__| 
                                                                                                            
";
            Console.WriteLine(s);
            Console.WriteLine("Thank you for playing my game!\nC# is pretty good I suppose.");
            Console.WriteLine("If I could change anything, I'd increase the render speed of the windows terminal.");

        }

    }
}
